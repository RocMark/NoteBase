# 閉包

# 特性
* 內部函數可使用 外部函數定義的變數

* 封閉性
外界無法存取內部資料，除非閉包向外公開

* 持久性
一般函式呼叫完畢後，即會GC。
閉包會因仍有參照對象，而繼續保存於記憶體當中

# 簡單閉包範例
```js
  function f(x) {
    const a = x
    const b = function () { return x }
    return b
  }
  const c = f(1)
  console.log(c()) // 1
```

## 運作順序
1. 執行 const c = f(1)時，會呼叫 f()
2. 執行完 f() 時，回收結構
3. 

# GC 垃圾回收機制
週期性找出不在使用的變數，將其占用的內存釋放。

* 全域變數
生命週期 會於關閉頁面才會結束
* 區域變數
函式執行過程中才存在，生命週期 直到函式結束

* 閉包
因為內部變數會參照 外部函式定義的變數，因此外部函式不算是執行完畢。

## GC 範例
```js
  function fn1() {
    const obj = { name: 'yu', age: 10 }
  }

  function fn2() {
    const obj = { name: 'yu', age: 11 }
    return obj
  }

  const a = fn1()
  const b = fn2()
```
1. fn1被調用，建立該環境